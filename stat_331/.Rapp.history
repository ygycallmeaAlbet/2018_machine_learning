air <- read.csv("airfare.csv")
summary(air)
air <- read.csv("airfare.csv")
summary(air)
l
l
air
pairs(~fare + pass + lead_share + lead_fare + low_share + low_fare, data = air)
# Q2
sq_lead_fare <- I(lead_fare ^ 2)
m_fare <lm(fare ~ dist + pass + lead_fare + sq_lead_fare)
m_fare <lm(fare ~ dist + pass + lead_fare + I(lead_fare ^ 2))
m_fare <-lm(fare ~ dist + pass + lead_fare + I(lead_fare ^ 2))
m_fare <-lm(fare ~ dist + pass + lead_fare + I(lead_fare ^ 2))
m_fare <-lm(fare ~ dist + pass + lead_fare + I(lead_fare ^ 2), data = air)
m_fare
summary(m1_fare)
m1_fare <-lm(fare ~ dist + pass + lead_fare + I(lead_fare ^ 2), data = air)
summary(m1_fare)
m2_fare <- lm(fare ~ dist + pass + lead_fare, data = air)
summary(m2_fare)
anova(m1_fare, m2_fare)
anova(m2_fare, m1_fare)
summary(m1_fare)
f2 <- fata.frame(dist = 100, pass = 300,lead_fare = 160)
f1 <- data.frame(dist=100,pass=150,lead_fare = 160)
f2 <- fata.frame(dist = 100, pass = 300,lead_fare = 160)
f2 <- data.frame(dist = 100, pass = 300,lead_fare = 160)
ef1 <- predict(m1,newdata=flight1)
ef1 <- predict(f1,newdata=flight1)
ef2 <- predict(f2,nemdata=flight2)
ef1 <- predict(m1_fare,newdata=f1)
ef2 <- predict(m2_fare,nemdata=f2)
ef1-ef2
f1 <- data.frame(dist=100,pass=150,lead_fare = 160)
f2 <- data.frame(dist = 100, pass = 100,lead_fare = 120)
ef1 <- predict(m1_fare,newdata=f1)
ef2 <- predict(m2_fare,nemdata=f2)
ef1-ef2
ef1 <- predict(m1_fare,newdata=f1)
ef2 <- predict(m1_fare,nemdata=f2)
ef1-ef2
clean
clear
clr
help cut
help(cut)
lead_rate <- cut(air$lead_fare/air$dis,breaks=c(0.14,0.21))
lead_rate <- cut(air$lead_fare/air$dis,breaks=c(0,0.14,0.21,100))
lead_rate
lead_rate <- cut(air$lead_fare/air$dis,#
	breaks=c(0,0.14,0.21,100),#
	labels=c("low","med","asdsa"))
head(lead_rate)
tapply(air$fare,lead_rate,sd)
head(lead_rate)
lead_rate <- cut(air$lead_fare/air$dis,#
	breaks=c(0,0.14,0.21,100),#
	labels=c("low","med","high"))
head(lead_rate)
tapply(air$fare,lead_rate,sd)
lead_rate
m2 <- lm(fare ~ pass + lead_rate, data=air)
summary(m2)
m_full <- lm(fare ~ pass + lead_rate + pass * lead_rate, data = air)
summary(m_full)
m_full <- lm(fare ~ pass + lead_rate + pass:lead_rate, data = air)
m_full <- lm(fare ~ pass + lead_rate + pass:lead_rate, data = air)
summary(m_full)
mred <- (fare ~ pass + lead_rate, data = air)
mred <- (fare ~ pass + lead_rate, data = air)
dff <- m_full$df
dfr <-mred$df
mred <- lm(fare ~ pass + lead_rate, data = air)
summary(mred)
dff <- m_full$df
dfr <-mred$df
ssf <- sum(residuals(mfull)^2)
ssr <- sum(residuals(mred)^2)
ssf <- sum(residuals(m_full)^2)
ssr <- sum(residuals(mred)^2)
fobs <- (ssr -ssf)/(dfr - dff)/(ssf/dff)
fobs
p <- pf(fobs,df1=(dfr-dff),df2=dff,lower,rtail = FALSE)
p <- pf(fobs,df1=(dfr-dff),df2=dff,lower,tail = FALSE)
p <- pf(fobs,df1=(dfr-dff),df2=dff,lower.tail = FALSE)
p
anova(mred,m_full)
ef1-ef2
m3 <- lm(log(fare) ~ log(dist) + log(dist),data = air)
summary(m3)
m3 <- lm(log(fare) ~ log(dist) + log(pass),data = air)
summary(m3)
Y <- log(air$fare)
X <- model.matrix(m3)
beta.hat <- sovle(t(X)%*%X)%*%t(X)%*%Y
beta.hat <- solve(t(X)%*%X)%*%t(X)%*%Y
beta.hat
sigma2.hat <- sum(resid(m3)^2)/m3$df
sigma2.hat
rhol0_MLE <- exp(beta.hat910 + 0.5 * sigma2.hat^2)
rhol0_MLE <- exp(beta.hat[1] + 0.5 * sigma2.hat^2)
rhol0_MLE
rhol0_MLE <- exp(beta.hat[1] + 0.5 * sigma2.hat)
rhol0_MLE
f1 <- data.frame(dist=100,pass=150,lead_fare = 160)
f1
f2 <- data.frame(dist = 100, pass = 100,lead_fare = 120)
f2
ef1 <- predict(m1_fare,newdata=f1)
ef1
ef2 <- predict(m1_fare,nemdata=f2)
ef2
f1 <- data.frame(dist=100,pass=150,lead_fare = 160)#
f2 <- data.frame(dist = 100, pass = 100,lead_fare = 120)#
ef1 <- predict(m1_fare,newdata=f1)#
ef2 <- predict(m1_fare,newdata=f2)#
ef1-ef2
